<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Climate Cases</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link to your external stylesheet -->
    <link rel="stylesheet" href="/src/style.css">
  </head>
  <body class="bg-gray-100 flex flex-col h-screen">
  <header class="w-full bg-black text-white flex items-stretch shadow-md z-10 border-b border-white">
    
    <div class="flex-shrink-0 flex items-center p-2 border-r border-white">
      <img src="Climate_Rights_Logo-b1-02.png" alt="Logo" class="h-8 w-auto">
    </div>

      <button id="toggle-cases-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Climate Cases</button>
      <button id="toggle-climate-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Temperature</button>
      <button id="toggle-climate-raster-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Emmission</button>
      <!-- <button id="toggle-wind-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Wind</button> -->
      <button id="toggle-sea-level-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Sea Level</button>
      <button id="toggle-burn-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Burns</button>
      <button id="toggle-disasters-btn" class="px-4 py-2 bg-black font-bold transition-colors rounded-none border-r border-white border-y-0 border-x-0">Disasters</button>
      <!-- <button id="download-svg-btn" class="px-4 py-2 bg-white text-black font-bold hover:bg-gray-800 transition-colors rounded-none border-r border-white">Download SVG</button> -->

      <!-- Slider is inside the header -->
      <div id="slider-container">
          <label id="year-label" for="year-slider">2023</label>
          <input type="range" id="year-slider" min="1980" max="2023" step="1" value="2023">
      </div>

  </header>

  <main>
    <div id="content-wrapper">
      <div id="filter-panel">
        <div class="search-container">
          <input type="text" id="country-search-input" placeholder="Search country..." autocomplete="off">
          <button id="country-search-btn">Search</button>
          <div id="autocomplete-results"></div>
        </div>
        <div class="filter-group">
          <div class="filter-group-header">
            <span>Status</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="white" stroke-width="2"><path d="M19 9l-7 7-7-7"></path></svg>
          </div>
          <div class="filter-values">
            <div class="filter-item"><input type="checkbox" id="status-decided" name="status" value="Decided (General)"><label for="status-decided">Decided (General)</label></div>
            <div class="filter-item"><input type="checkbox" id="status-approved" name="status" value="Approved / Granted"><label for="status-approved">Approved / Granted</label></div>
            <div class="filter-item"><input type="checkbox" id="status-settled" name="status" value="Settled / Resolved"><label for="status-settled">Settled / Resolved</label></div>
            <div class="filter-item"><input type="checkbox" id="status-denied" name="status" value="Denied / Rejected"><label for="status-denied">Denied / Rejected</label></div>
            <div class="filter-item"><input type="checkbox" id="status-other" name="status" value="Other / Miscellaneous"><label for="status-other">Other / Miscellaneous</label></div>
            <div class="filter-item"><input type="checkbox" id="status-mixed" name="status" value="Mixed / Partially Successful"><label for="status-mixed">Mixed / Partially Successful</label></div>
            <div class="filter-item"><input type="checkbox" id="status-pending" name="status" value="In Progress / Pending"><label for="status-pending">In Progress / Pending</label></div>
            <div class="filter-item"><input type="checkbox" id="status-reversed" name="status" value="Reversed / Remanded"><label for="status-reversed">Reversed / Remanded</label></div>
            <div class="filter-item"><input type="checkbox" id="status-policy" name="status" value="Policy / Law Related"><label for="status-policy">Policy / Law Related</label></div>
            <div class="filter-item"><input type="checkbox" id="status-na" name="status" value="Not Available"><label for="status-na">Not Available</label></div>
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-group-header">
            <span>Issues</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="white" stroke-width="2"><path d="M19 9l-7 7-7-7"></path></svg>
          </div>
          <div class="filter-values">
            <div class="filter-item"><input type="checkbox" id="filter-cat1" name="category" value="Fire|Burn"><label for="filter-cat1">Fires</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat2" name="category" value="Emission"><label for="filter-cat2" >Emissions</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat3" name="category" value="Extraction|Mining|Drilling"><label for="filter-cat3" >Illegal Extraction</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat4" name="category" value="Land"><label for="filter-cat4" >Land Dispossesion</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat5" name="category" value="Coal"><label for="filter-cat5" >Coal</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat6" name="category" value="Deforestation"><label for="filter-cat6" >Deforestation</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat7" name="category" value="Sea Level"><label for="filter-cat7" >Sea Level Rise</label></div>
            <div class="filter-item"><input type="checkbox" id="filter-cat8" name="category" value="Green"><label for="filter-cat8" >Greenwashing</label></div>
          </div>
        </div>
        <div style="width: 250px" class="absolute text-xs bottom-5">Climate Change Litigation Database sourced from Sabin Center for Climate Change Law. <u>www.climatecasechart.com </u>| <i>Downloaded on 29-07-2025</i></div>
      </div>

      <div id="map-container" class="flex-grow flex items-center justify-center relative overflow-hidden">
        <div id="wind-toggle-container">
        <label>
          <input type="checkbox" id="toggle-wind-btn">
          Wind Layer
        </label>
      </div>
        <!-- NEW: Attractor Screen -->
        <div id="attractor-screen">
          <h1 id="attractor-title">Atlas of Climate Cases</h1>
          <p id="attractor-prompt">Use the trackpad to explore</p>
        </div>

        <div id="info-box" class="invisible opacity-0 transition-opacity duration-300 ease-in-out pointer-events-none">
          <div id="info-box-header"><h2 id="info-country-name"></h2><button id="info-box-close">&times;</button></div>
          <div id="info-box-content"></div>
        </div>
        <div id="tooltip" class="absolute p-2 text-sm bg-black bg-opacity-100 text-white rounded-md invisible opacity-0 transition-opacity duration-200 pointer-events-none"></div>
        <div id="legend" style="z-index: 10; bottom:170px;" class="invisible absolute left-2 p-3 bg-black bg-opacity-80 border shadow-lg text-xs text-white">
          <div class="font-bold mb-2">Climate Cases</div>
          <div id="legend-items"></div>
        </div>
      </div>

      <!-- NEW: Timeline Detail Panel -->
      <div id="timeline-detail-panel">
        <div id="timeline-detail-header">
            <h3>Case Details</h3>
            <button id="timeline-detail-close">&times;</button>
        </div>
        <div id="timeline-detail-content">
            <p>Click an event on the timeline to see details here.</p>
        </div>
      </div>
    </div>

    <!-- NEW: Timeline Container -->
    <div id="timeline-container">
      <svg id="timeline-svg"></svg>
    </div>
    <!-- CHAT WIDGET HTML -->
    <div class="chat-widget-container" id="chatWidget">
      <!-- The chat popup window -->
      <div class="chat-popup" id="chatPopup">
          <div class="chat-header">
              <h2>Climate Case Assistant</h2>
              <!-- This button now closes by toggling the same function -->
              <button class="close-btn" id="chatCloseBtn">&times;</button>
          </div>
          <div class="chat-messages" id="chatMessages">
              <div class="message ai-message">
                  What would you like to know?
              </div>
          </div>
          <form class="chat-input" id="chatForm">
              <input type="text" id="promptInput" placeholder="Type your message..." autocomplete="off">
              <button type="submit" id="sendButton">Send</button>
          </form>
      </div>
        <!-- Button to toggle the chat window -->
      <button class="chat-toggle-button" id="chatToggleBtn">
          AI AGENT
      </button>
    </div>          
  </main>
  

  <script type="module" src="/src/main.js"></script>

</body>
</html>

